<ui:composition template="/WEB-INF/template/LayoutPadrao.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui">

	<f:metadata>
		<f:param name="dummy" />
		<o:viewParam name="demanda" value="#{demandaBean.demanda}" />
		<!-- 		<f:event listener="#{demandaBean.inicializar}" type="preRenderView"></f:event> -->
	</f:metadata>

	<ui:define name="titulo">Demanda</ui:define>

	<ui:define name="corpo">

		<h:form id="formCadastro" enctype="multipart/form-data">

			<h1 style="margin-top: 65px">Solicitação de Demanda</h1>

			<p:toolbar style="margin-top: 05px">
				<p:toolbarGroup>
					<p:button value="Novo" icon="ui-icon-document"
						outcome="/configuracao/CadastroDemanda" />
					<p:commandButton value="Enviar" icon="ui-icon-transferthick-e-w"
						title="Enviar e-mail" action="#{demandaBean.EnviarEmail}"
						update="@form">
						<p:confirm icon="ui-icon-alert" header="SAC"
							message="Enviar por e-mail?" />
					</p:commandButton>
				</p:toolbarGroup>

				<p:toolbarGroup align="right">
					<p:button value="Pesquisa" icon="ui-icon-search"
						outcome="/configuracao/PesquisaDemanda" />
				</p:toolbarGroup>
			</p:toolbar>

			<p:messages autoUpdate="true" closable="true" />

			<p:tabView id="tabView" orientation="left" style="margin-top: 5px">
				<p:tab title="Solicitação" id="tabSolicita">
					<p:panelGrid columns="2" id="painelDados"
						style="width: 100%; margin-top: 5px; border: none">

						<p:outputLabel value="Número"
							rendered="#{demandaBean.demanda.existe}" />
						<h:outputText value="#{demandaBean.demanda.id}"
							rendered="#{demandaBean.demanda.existe}">
							<f:convertNumber pattern="000000" />
						</h:outputText>

						<p:outputLabel value="Nome" for="nome" />
						<p:inputText value="#{demandaBean.demanda.nome}" required="true"
							id="nome" readonly="#{not demandaBean.demanda.podeSalvar}"
							style="width: 95%" />

						<p:outputLabel value="E-mail" for="email" />
						<p:inputText value="#{demandaBean.demanda.email}" id="email"
							readonly="#{not demandaBean.demanda.podeSalvar}"
							style="width: 95%" />

						<p:outputLabel value="Telefone" for="telefone" />
						<p:inputMask mask="99999999999" style="width: 95%"
							value="#{demandaBean.demanda.telefone}" required="true"
							id="telefone" readonly="#{not demandaBean.demanda.podeSalvar}" />

						<p:outputLabel value="Resumo" for="resumo" />
						<p:inputText value="#{demandaBean.demanda.resumo}" required="true"
							id="resumo" readonly="#{not demandaBean.demanda.podeSalvar}"
							style="width: 95%" />

						<p:outputLabel value="Descrição da demanda" for="descricao" />
						<h:panelGroup layout="block" style="padding-right: 10px">
							<p:inputTextarea rows="4" style="width: 100%"
								value="#{demandaBean.demanda.descritivo}" required="true"
								id="descricao" readonly="#{not demandaBean.demanda.podeSalvar}" />
						</h:panelGroup>

					</p:panelGrid>
				</p:tab>
			</p:tabView>

		</h:form>
	</ui:define>
</ui:composition>

<!-- 				<p:tab title="Resposta" id="tabResposta" -->
<!-- 					disabled="#{not demandaBean.demanda.enviado}"> -->
<!-- 					<p:outputLabel value="#{demandaBean.demanda.resumo}" -->
<!-- 						style="width: 95%" /> -->
<!-- 					<br /> -->
<!-- 					<p:inputTextarea rows="10" style="width: 100%" -->
<!-- 						value="#{demandaBean.demanda.resposta}" readonly="true" /> -->
<!-- 				</p:tab> -->


<!-- 					<p:commandButton value="Salvar" icon="ui-icon-disk" -->
<!-- 						disabled="#{not demandaBean.demanda.podeSalvar}" -->
<!-- 						title="Salvar demanda" action="#{demandaBean.salvar}" -->
<!-- 						update="@form" /> -->
<!-- 					<p:commandButton value="Enviar" icon="ui-icon-transferthick-e-w" -->
<!-- 						title="Enviar demanda" action="#{demandaBean.enviarDemanda}" -->
<!-- 						disabled="#{not demandaBean.demanda.podeEnviar}" update="@form"> -->
<!-- 						<p:confirm icon="ui-icon-alert" header="SAC" -->
<!-- 							message="Emitir a demanda atual?" /> -->
<!-- 					</p:commandButton> -->


<!-- 					<p:commandButton value="Atualizar" icon="ui-icon-refresh" -->
<!-- 						title="atualizar demanda" action="#{demandaBean.atualizarDemanda}" -->
<!-- 						disabled="#{not demandaBean.demanda.podeAtualizar}" update="@form"> -->
<!-- 						<p:confirm icon="ui-icon-alert" header="SAC" -->
<!-- 							message="Atualizar a demanda atual?" /> -->
<!-- 					</p:commandButton> -->
<!-- 					<p:commandButton value="Cancelar" icon="ui-icon-close" -->
<!-- 						title="cancela demanda" action="#{demandaBean.cancelarDemanda}" -->
<!-- 						update="@form" disabled="#{not demandaBean.demanda.podeCancelar}"> -->
<!-- 						<p:confirm icon="ui-icon-alert" header="SAC" -->
<!-- 							message="Cancelar a demanda atual?" /> -->
<!-- 					</p:commandButton> -->
